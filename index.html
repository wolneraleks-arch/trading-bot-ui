<!-- <!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Redirecting...</title>
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
</head>
<body>
    <script>
        // 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –í–ö
        vkBridge.send("VKWebAppInit", {});

        // 2. –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∞—à–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Google Apps Script
        const GAS_URL = "https://script.google.com/macros/s/AKfycbx1RtFb9o-XMooNAFgD-tnnDeprncLYvSzfxveWmsFa9H2-ZXUo4Gp6G10i9BvpHd6cgA/exec";

        // 3. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ –≤—Å–µ–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (vk_user_id –∏ —Ç.–¥.)
        const currentParams = window.location.search;
        window.location.href = GAS_URL + currentParams;
    </script>
</body>
</html> -->

<!-- –≤–µ—Ä—Å–∏—è 2 –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è -->
<!-- <!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; padding: 20px; color: #444; }
        .card { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        button { background: #0077ff; color: white; border: none; padding: 12px; border-radius: 8px; width: 100%; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

<div class="card">
    <h3 id="title">–ó–∞–≥—Ä—É–∑–∫–∞...</h3>
    <p id="status">–ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø</p>
    <div id="content" style="display:none">
        <p>–í–∞—à–∏ —Ç–∏–∫–µ—Ä—ã: <b id="tickers"></b></p>
        <button onclick="buySubscription()">–ü—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</button>
    </div>
</div>

<script>
    const GAS_URL = "https://script.google.com/macros/s/AKfycbx1RtFb9o-XMooNAFgD-tnnDeprncLYvSzfxveWmsFa9H2-ZXUo4Gp6G10i9BvpHd6cgA/exec"; 

    async function start() {
        const title = document.getElementById('title');
        const statusText = document.getElementById('status');

        try {
            await vkBridge.send("VKWebAppInit");
            const urlParams = new URLSearchParams(window.location.search);
            const vkId = urlParams.get('vk_user_id');

            if (!vkId) {
                title.innerText = "–û—à–∏–±–∫–∞";
                statusText.innerText = "–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–∑ –í–ö";
                return;
            }

            // –ò–º–∏—Ç–∏—Ä—É–µ–º —Å—Ç–∞—Ç—É—Å –∏–∑ –¢—Ä–∏–±—É—Ç–∞ (–ø–æ–∑–∂–µ –∑–∞–º–µ–Ω–∏–º –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É)
            const tributeStatus = "active"; 

            // –ó–∞–ø—Ä–æ—Å –∫ GAS
            const requestUrl = `${GAS_URL}?action=check_or_register&vk_id=${vkId}&tribute_status=${tributeStatus}`;
            
            const response = await fetch(requestUrl);
            if (!response.ok) throw new Error("–°–µ—Ç—å –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª–∞");
            
            const result = await response.json();

            if (result.status === "guest") {
                title.innerText = "–î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω";
                statusText.innerText = "–û–ø–ª–∞—Ç–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É, —á—Ç–æ–±—ã –±–æ—Ç –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å.";
            } else {
                title.innerText = "–ù–∞—Å—Ç—Ä–æ–π–∫–∏";
                statusText.innerText = "–ü–æ–¥–ø–∏—Å–∫–∞: " + (result.data.active === "–î–∞" ? "–ê–∫—Ç–∏–≤–Ω–∞ ‚úÖ" : "–ò—Å—Ç–µ–∫–ª–∞ ‚ùå");
                document.getElementById('tickers').innerText = result.data.tickers;
                document.getElementById('content').style.display = "block";
            }

        } catch (err) {
            title.innerText = "–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏";
            statusText.innerText = "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è —Å —Ç–∞–±–ª–∏—Ü–µ–π. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–µ–ø–ª–æ–π GAS.";
            console.error(err);
        }
    }

    start();
</script>

</body>
</html> -->



<!-- –í–µ—Ä—Å–∏—è 3 —Å –¥–∏–∑–∞–π–Ω–æ–º -->
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no">
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
    <style>
        :root { --vk-blue: #0077ff; --bg-gray: #f0f2f5; }
        body { font-family: -apple-system, system-ui, "Helvetica Neue", Roboto, sans-serif; background: var(--bg-gray); margin: 0; padding: 0; color: #000; }
        
        /* –°–æ—Å—Ç–æ—è–Ω–∏—è —ç–∫—Ä–∞–Ω–æ–≤ */
        .view { display: none; padding: 16px; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .active { display: block; }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ –∏ —ç–ª–µ–º–µ–Ω—Ç—ã */
        .card { background: white; border-radius: 12px; padding: 16px; margin-bottom: 12px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .section-title { font-size: 13px; color: #818c99; text-transform: uppercase; margin: 0 0 8px 4px; letter-spacing: 0.3px; }
        
        /* –ò–Ω–ø—É—Ç—ã –∏ –°–≤–∏—Ç—á–∏ */
        label { display: block; font-size: 14px; margin-bottom: 12px; display: flex; justify-content: space-between; align-items: center; }
        input[type="text"], input[type="number"] { 
            width: 100%; box-sizing: border-box; padding: 12px; border: 1px solid #dce1e6; 
            border-radius: 8px; background: #f5f5f5; font-size: 16px; margin-top: 4px;
        }
        .switch { position: relative; display: inline-block; width: 44px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ced4da; transition: .4s; border-radius: 24px; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--vk-blue); }
        input:checked + .slider:before { transform: translateX(20px); }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn { background: var(--vk-blue); color: white; border: none; padding: 14px; border-radius: 10px; width: 100%; font-size: 16px; font-weight: 600; cursor: pointer; margin-top: 10px; }
        .btn:disabled { opacity: 0.6; }
        .btn-pay { background: #4bb34b; }
        
        .loader { text-align: center; margin-top: 40vh; }
        .status-tag { display: inline-block; padding: 4px 8px; border-radius: 6px; font-size: 12px; font-weight: bold; }
        .status-ok { background: #e7f8ed; color: #1c7332; }
    </style>
</head>
<body>

    <!-- –≠–ö–†–ê–ù 1: –ó–ê–ì–†–£–ó–ö–ê -->
    <div id="view-loading" class="view active">
        <div class="loader">
            <div style="font-size: 24px; margin-bottom: 10px;">‚åõ</div>
            <div id="loading-text">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–∞–∑–æ–π...</div>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù 2: –ü–ï–ô–í–û–õ–õ (–ù–æ–≤—ã–π —é–∑–µ—Ä) -->
    <div id="view-paywall" class="view">
        <div class="card" style="text-align: center;">
            <div style="font-size: 48px; margin-bottom: 16px;">üíé</div>
            <h2>–î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω</h2>
            <p style="color: #626d7a;">–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –≤ Tribute.</p>
            <button class="btn btn-pay" onclick="openTribute()">–û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Tribute</button>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù 3: –ì–õ–ê–í–ù–ê–Ø (–ù–∞—Å—Ç—Ä–æ–π–∫–∏) -->
    <div id="view-main" class="view">
        <div class="section-title">–°—Ç–∞—Ç—É—Å –∞–∫–∫–∞—É–Ω—Ç–∞</div>
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <div style="font-weight: 600;" id="user-level">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    <div style="font-size: 12px; color: #818c99;">ID: <span id="display-id"></span></div>
                </div>
                <div class="status-tag status-ok">–ê–ö–¢–ò–í–ù–û</div>
            </div>
        </div>

        <div class="section-title">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞</div>
        <div class="card">
            <label>–ê–∫—Ü–∏–∏ <input type="text" id="in_tickers_stocks" placeholder="SBER, GAZP"></label>
            <label>–û–±–ª–∏–≥–∞—Ü–∏–∏ <input type="text" id="in_tickers_bonds" placeholder="SU26238"></label>
            <label>–§—å—é—á–µ—Ä—Å—ã <input type="text" id="in_tickers_fut" placeholder="RIZ3"></label>
        </div>

        <div class="section-title">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–æ–±–æ—Ç–∞</div>
        <div class="card">
            <label>–ë–æ—Ç –í–ö –≤–∫–ª—é—á–µ–Ω 
                <div class="switch"><input type="checkbox" id="sw_vk_on"><span class="slider"></span></div>
            </label>
            <label>–ë–æ—Ç –¢–ì –≤–∫–ª—é—á–µ–Ω 
                <div class="switch"><input type="checkbox" id="sw_tg_on"><span class="slider"></span></div>
            </label>
            <hr style="border: 0; border-top: 1px solid #f0f2f5; margin: 12px 0;">
            <label>–ü–µ—Ä–∏–æ–¥ ADR (–¥–Ω–∏) <input type="number" id="in_adr_days" style="width: 80px;"></label>
            <label>–ü–æ—Ä–æ–≥ RSI <input type="number" id="in_rsi_period" style="width: 80px;"></label>
        </div>

        <button class="btn" id="save-btn" onclick="saveData()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </div>

<script>
    const GAS_URL = "https://script.google.com/macros/s/AKfycbx1RtFb9o-XMooNAFgD-tnnDeprncLYvSzfxveWmsFa9H2-ZXUo4Gp6G10i9BvpHd6cgA/exec"; 
    let currentVkId = "";
    let initialData = {}; // –û–±—ä–µ–∫—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î

    function showView(viewId) {
        document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
        document.getElementById(viewId).classList.add('active');
    }

    // async function init() {
    //     try {
    //         await vkBridge.send("VKWebAppInit");
    //         const urlParams = new URLSearchParams(window.location.search);
    //         currentVkId = urlParams.get('vk_user_id');

    //         if (!currentVkId) {
    //             document.getElementById('loading-text').innerText = "–û—à–∏–±–∫–∞: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–∑ –í–ö";
    //             return;
    //         }

    //         document.getElementById('display-id').innerText = currentVkId;

    //         // –ó–∞–ø—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö (–∑–¥–µ—Å—å —Å—Ç–∞–≤–∏–º —Å—Ç–∞—Ç—É—Å –∏–∑ –¢—Ä–∏–±—É—Ç–∞, –ø–æ–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∞ 'active')
    //         // const response = await fetch(`${GAS_URL}?action=check_or_register&vk_id=${currentVkId}&tribute_status=active`);
           
    //    const response = await fetch(`${GAS_URL}?action=check_or_register&vk_id=${currentVkId}&tribute_status=none`, {
    // method: 'GET',
    // redirect: 'follow' 
    //  });
    //    // const response = await fetch(`${GAS_URL}?action=check_or_register&vk_id=${currentVkId}&tribute_status=none`);

            
    //         const res = await response.json();

    //         if (res.status === "guest") {
    //             showView('view-paywall');
    //         } else {
    //             fillForm(res.data); // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º "—Å–ª–µ–ø–æ–∫"
    //             showView('view-main');
    //         }
    //     } catch (e) {
    //         document.getElementById('loading-text').innerText = "–û—à–∏–±–∫–∞ —Å–≤—è–∑–∏ —Å —Å–µ—Ä–≤–µ—Ä–æ–º";
    //     }
    // }

      async function init() {
    const statusEl = document.getElementById('loading-text');
    
    const logStatus = (msg) => {
        statusEl.innerText = msg;
        console.log(msg);
    };

    try {
        logStatus("üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VK Bridge...");
        await vkBridge.send("VKWebAppInit");
        
        logStatus("üÜî –ü–æ–ª—É—á–µ–Ω–∏–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...");
        const urlParams = new URLSearchParams(window.location.search);
        currentVkId = urlParams.get('vk_user_id');

        if (!currentVkId) {
            logStatus("‚ùå –û—à–∏–±–∫–∞: ID –Ω–µ –Ω–∞–π–¥–µ–Ω. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–∑ –í–ö.");
            return;
        }
        document.getElementById('display-id').innerText = currentVkId;

        // –í–ù–ò–ú–ê–ù–ò–ï: –°–¢–ê–í–ò–ú status=none –ß–¢–û–ë–´ –ü–†–û–í–ï–†–ò–¢–¨ –≠–ö–†–ê–ù –û–ü–õ–ê–¢–´
        const testStatus = "none"; 
        const fetchUrl = `${GAS_URL}?action=check_or_register&vk_id=${currentVkId}&tribute_status=${testStatus}`;
        
        logStatus("‚òÅÔ∏è –ó–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É (GAS)...");
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Ç–∞–π–º–∞—É—Ç, —á—Ç–æ–±—ã –Ω–µ –∂–¥–∞—Ç—å –≤–µ—á–Ω–æ
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 15000); // 15 —Å–µ–∫—É–Ω–¥

        const response = await fetch(fetchUrl, {
            method: 'GET',
            mode: 'cors',
            signal: controller.signal
        });
        clearTimeout(timeoutId);

        logStatus("üì¶ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞...");
        const res = await response.json();

        logStatus("‚ú® –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –¥–æ—Å—Ç—É–ø–∞...");
        if (res.status === "guest") {
            showView('view-paywall');
        } else if (res.data) {
            fillForm(res.data);
            showView('view-main');
        } else {
            throw new Error("–°–µ—Ä–≤–µ—Ä –ø—Ä–∏—Å–ª–∞–ª –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ");
        }

    } catch (e) {
        logStatus("‚ùå –û—à–∏–±–∫–∞: " + e.message);
        console.error("Full error:", e);
        
        // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –≤ fetch, –ø—Ä–æ–≤–µ—Ä–∏–º Debug_Log –≤ —Ç–∞–±–ª–∏—Ü–µ
        if (e.message.includes("fetch") || e.name === "AbortError") {
            statusEl.innerHTML += "<br><small>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Debug_Log –≤ —Ç–∞–±–ª–∏—Ü–µ –∏ Deployment ID</small>";
        }
    }
}


    // 1. –ó–ê–ü–û–õ–ù–ï–ù–ò–ï –§–û–†–ú–´ –ò –ó–ê–ü–û–ú–ò–ù–ê–ù–ò–ï –°–û–°–¢–û–Ø–ù–ò–Ø
    function fillForm(data) {
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º "—Å–ª–µ–ø–æ–∫" –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
        initialData = {
            tickers: data.tickers_stocks || "",
            adr: String(data.adr || "20"),
            vk_on: data.vk_on === "–í–∫–ª"
        };

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø–æ–ª—è
        document.getElementById('user-level').innerText = (data.level || "–ë–∞–∑–æ–≤—ã–π") + " –¥–æ—Å—Ç—É–ø";
        document.getElementById('in_tickers_stocks').value = initialData.tickers;
        document.getElementById('in_adr_days').value = initialData.adr;
        document.getElementById('sw_vk_on').checked = initialData.vk_on;

        // –í–µ—à–∞–µ–º "—Å–ª—É—à–∞—Ç–µ–ª–µ–π" –Ω–∞ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
        ['in_tickers_stocks', 'in_adr_days', 'sw_vk_on'].forEach(id => {
            const el = document.getElementById(id);
            el.addEventListener('input', checkChanges);
            el.addEventListener('change', checkChanges);
        });

        checkChanges(); // –°—Ä–∞–∑—É –ø—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–∫–∏
    }

    // 2. –§–£–ù–ö–¶–ò–Ø –ü–†–û–í–ï–†–ö–ò –ò–ó–ú–ï–ù–ï–ù–ò–ô (–£–ú–ù–ê–Ø –ö–ù–û–ü–ö–ê)
    function checkChanges() {
        const currentData = {
            tickers: document.getElementById('in_tickers_stocks').value,
            adr: document.getElementById('in_adr_days').value,
            vk_on: document.getElementById('sw_vk_on').checked
        };

        // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å —Ç–µ–º, —á—Ç–æ –±—ã–ª–æ –≤ –ë–î
        const hasChanged = 
            currentData.tickers !== initialData.tickers ||
            currentData.adr !== initialData.adr ||
            currentData.vk_on !== initialData.vk_on;

        const btn = document.getElementById('save-btn');
        btn.disabled = !hasChanged;
        
        if (hasChanged) {
            btn.innerText = "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è";
            btn.style.opacity = "1";
            btn.style.background = "#0077ff";
        } else {
            btn.innerText = "–ò–∑–º–µ–Ω–µ–Ω–∏–π –Ω–µ—Ç";
            btn.style.opacity = "0.5";
            btn.style.background = "#818c99";
        }
    }

    // 3. –°–û–•–†–ê–ù–ï–ù–ò–ï
    async function saveData() {
        const btn = document.getElementById('save-btn');
        btn.disabled = true;
        btn.innerText = "‚è≥ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...";

        const currentData = {
            vk_id: currentVkId,
            tickers: document.getElementById('in_tickers_stocks').value,
            adr: document.getElementById('in_adr_days').value,
            vk_on: document.getElementById('sw_vk_on').checked ? "–í–∫–ª" : "–í—ã–∫–ª"
        };

        try {
            const url = `${GAS_URL}?action=update_settings&` + new URLSearchParams(currentData);
            const response = await fetch(url);
            const res = await response.json();

            if (res.status === "success") {
                // –û–±–Ω–æ–≤–ª—è–µ–º initialData, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ —Å–Ω–æ–≤–∞ —Å—Ç–∞–ª–∞ —Å–µ—Ä–æ–π
                initialData = {
                    tickers: currentData.tickers,
                    adr: currentData.adr,
                    vk_on: currentData.vk_on === "–í–∫–ª"
                };
                btn.innerText = "‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!";
                setTimeout(checkChanges, 2000);
            }
        } catch (e) {
            // alert("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è");
            // btn.disabled = false;
            // checkChanges();
            document.getElementById('loading-text').innerHTML = 
        "‚ùå –û—à–∏–±–∫–∞ —Å–≤—è–∑–∏<br><small style='font-size:10px'>" + e.message + "</small>";
    console.error(e);
        }
    }

    function openTribute() {
        vkBridge.send("VKWebAppOpenURL", {"url": "https://www.vedomosti.ru/investments"});
    }

    init();
</script>

</body>
</html>





